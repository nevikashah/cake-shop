<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üç∞ Neobrutalism Cake Shop</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    :root {
      --background: 225 20% 95%;
      --foreground: 225 20% 10%;
      --card: 225 20% 100%;
      --card-foreground: 225 20% 10%;
      --popover: 225 20% 100%;
      --popover-foreground: 225 20% 10%;
      --primary: 225 20% 10%;
      --primary-foreground: 225 20% 95%;
      --secondary: 225 20% 90%;
      --secondary-foreground: 225 20% 10%;
      --secondary-background: 225 20% 85%;
      --muted: 225 10% 80%;
      --muted-foreground: 225 10% 45%;
      --accent: 225 20% 85%;
      --accent-foreground: 225 20% 10%;
      --destructive: 0 84% 60%;
      --destructive-foreground: 0 0% 98%;
      --border: 225 20% 20%;
      --input: 225 20% 90%;
      --ring: 225 20% 20%;
      --main: 330 80% 60%;
      --main-foreground: 225 20% 10%;
    }

    @import url('https://fonts.googleapis.com/css2?family=Geist+Sans:wght@400;500;600;700&family=Geist+Mono:wght@400;500;600&display=swap');
    
    :root {
      --font-heading: 'Geist Sans', sans-serif;
      --font-base: 'Geist Sans', sans-serif;
    }

    body {
      font-family: var(--font-base);
    }
  </style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            border: 'hsl(var(--border))',
            input: 'hsl(var(--input))',
            ring: 'hsl(var(--ring))',
            background: 'hsl(var(--background))',
            foreground: 'hsl(var(--foreground))',
            primary: {
              DEFAULT: 'hsl(var(--primary))',
              foreground: 'hsl(var(--primary-foreground))',
            },
            secondary: {
              DEFAULT: 'hsl(var(--secondary))',
              foreground: 'hsl(var(--secondary-foreground))',
              background: 'hsl(var(--secondary-background))',
            },
            destructive: {
              DEFAULT: 'hsl(var(--destructive))',
              foreground: 'hsl(var(--destructive-foreground))',
            },
            muted: {
              DEFAULT: 'hsl(var(--muted))',
              foreground: 'hsl(var(--muted-foreground))',
            },
            accent: {
              DEFAULT: 'hsl(var(--accent))',
              foreground: 'hsl(var(--accent-foreground))',
            },
            popover: {
              DEFAULT: 'hsl(var(--popover))',
              foreground: 'hsl(var(--popover-foreground))',
            },
            card: {
              DEFAULT: 'hsl(var(--card))',
              foreground: 'hsl(var(--card-foreground))',
            },
            main: {
              DEFAULT: 'hsl(var(--main))',
              foreground: 'hsl(var(--main-foreground))',
            },
          },
          borderRadius: {
            base: '8px',
          },
          fontFamily: {
            heading: ['var(--font-heading)'],
            base: ['var(--font-base)'],
          },
          boxShadow: {
            base: '4px 4px 0px 0px hsl(var(--border))',
            'base-md': '6px 6px 0px 0px hsl(var(--border))',
            'base-lg': '8px 8px 0px 0px hsl(var(--border))',
          },
        },
      },
    }
  </script>
</head>
<body class="bg-background text-foreground min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // UI Components
    const Button = ({ children, variant = 'default', size = 'default', className = '', onClick, disabled, ...props }) => {
      const variants = {
        default: 'bg-main text-main-foreground shadow-base hover:bg-main/90',
        neutral: 'bg-secondary-background text-foreground shadow-base hover:bg-secondary-background/90',
        secondary: 'bg-secondary text-secondary-foreground shadow-base hover:bg-secondary/80',
        ghost: 'hover:bg-accent hover:text-accent-foreground shadow-none border-none',
        link: 'text-primary underline-offset-4 hover:underline shadow-none border-none',
        noShadow: 'bg-main text-main-foreground hover:bg-main/90 shadow-none',
      };
      
      const sizes = {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 px-3 text-sm',
        lg: 'h-11 px-8',
        icon: 'h-10 w-10',
      };

      const classes = `
        inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-base text-sm font-bold
        ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 
        focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none 
        disabled:opacity-50 border-2 border-border active:translate-x-[3px] active:translate-y-[3px] 
        active:shadow-none transition-all cursor-pointer
        ${variants[variant]} ${sizes[size]} ${className}
      `.trim().replace(/\s+/g, ' ');

      return React.createElement('button', {
        className: classes,
        onClick,
        disabled,
        ...props
      }, children);
    };

    const Card = ({ children, className = '', ...props }) => {
      return React.createElement('div', {
        className: `rounded-base border-2 border-border bg-card text-card-foreground shadow-base ${className}`,
        ...props
      }, children);
    };

    const CardHeader = ({ children, className = '', ...props }) => {
      return React.createElement('div', {
        className: `flex flex-col space-y-1.5 p-6 ${className}`,
        ...props
      }, children);
    };

    const CardTitle = ({ children, className = '', ...props }) => {
      return React.createElement('h3', {
        className: `text-2xl font-bold leading-none tracking-tight ${className}`,
        ...props
      }, children);
    };

    const CardDescription = ({ children, className = '', ...props }) => {
      return React.createElement('p', {
        className: `text-sm text-muted-foreground ${className}`,
        ...props
      }, children);
    };

    const CardContent = ({ children, className = '', ...props }) => {
      return React.createElement('div', {
        className: `p-6 pt-0 ${className}`,
        ...props
      }, children);
    };

    const CardFooter = ({ children, className = '', ...props }) => {
      return React.createElement('div', {
        className: `flex items-center p-6 pt-0 ${className}`,
        ...props
      }, children);
    };

    const Input = ({ className = '', onChange, ...props }) => {
      return React.createElement('input', {
        className: `flex h-10 w-full rounded-base border-2 border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`,
        onChange: onChange ? (e) => onChange(e.target.value) : undefined,
        ...props
      });
    };

    const Label = ({ children, className = '', ...props }) => {
      return React.createElement('label', {
        className: `text-sm font-bold leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`,
        ...props
      }, children);
    };

    // Constants
    const FLAVORS = [
      'Vanilla', 'Chocolate', 'Red Velvet', 'Carrot', 
      'Lemon', 'Funfetti', 'Strawberry', 'German Chocolate'
    ];

    const DECORATIONS = [
      'Buttercream Frosting', 'Cream Cheese Frosting', 'Chocolate Ganache', 'Fresh Berries', 
      'Edible Flowers', 'Sprinkles', 'Chocolate Shavings', 'Caramel Drizzle'
    ];

    // Main App Component
    function CakeShopApp() {
      const [activeTab, setActiveTab] = useState('order');
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState(null);
      
      // Order form state
      const [customerName, setCustomerName] = useState('');
      const [selectedFlavor, setSelectedFlavor] = useState('');
      const [selectedSize, setSelectedSize] = useState('8-inch');
      const [selectedDecorations, setSelectedDecorations] = useState([]);
      const [lastOrder, setLastOrder] = useState(null);
      const [recentOrders, setRecentOrders] = useState([]);
      
      // Status check state
      const [statusOrderId, setStatusOrderId] = useState('');
      const [orderStatus, setOrderStatus] = useState(null);
      
      // Stats state
      const [stats, setStats] = useState(null);

      // Real-time counter state
      const [completedOrdersCount, setCompletedOrdersCount] = useState(0);
      const [queuedOrdersCount, setQueuedOrdersCount] = useState(0);
      const [counterConnected, setCounterConnected] = useState(false);

      const handleDecorationToggle = (decoration) => {
        setSelectedDecorations(prev => 
          prev.includes(decoration) 
            ? prev.filter(d => d !== decoration)
            : [...prev, decoration]
        );
      };

      const fetchRecentOrders = async () => {
        try {
          const response = await fetch('/orders/recent');
          if (response.ok) {
            const data = await response.json();
            // Ensure we have proper data structure and handle mixed decorations formats
            const orders = (data.orders || []).slice(0, 5).map(order => ({
              ...order,
              decorations: (() => {
                try {
                  // Handle different decorations formats - note: backend still uses 'toppings' field name
                  if (Array.isArray(order.decorations)) return order.decorations;
                  if (Array.isArray(order.toppings)) return order.toppings;
                  if (typeof order.decorations === 'string') {
                    try {
                      return JSON.parse(order.decorations);
                    } catch {
                      return order.decorations ? [order.decorations] : [];
                    }
                  }
                  if (typeof order.toppings === 'string') {
                    try {
                      return JSON.parse(order.toppings);
                    } catch {
                      return order.toppings ? [order.toppings] : [];
                    }
                  }
                  return [];
                } catch {
                  return [];
                }
              })()
            }));
            setRecentOrders(orders);
          } else {
            console.error('Failed to fetch recent orders: HTTP', response.status);
          }
        } catch (err) {
          console.error('Failed to fetch recent orders:', err);
        }
      };

      // Load recent orders on component mount and when activeTab changes to 'order'
      React.useEffect(() => {
        if (activeTab === 'order') {
          fetchRecentOrders();
        }
      }, [activeTab]);

      // Set up real-time counter WebSocket connection
      React.useEffect(() => {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const wsUrl = `${protocol}//${window.location.host}/counter/ws`;
        
        const connectToCounter = () => {
          const ws = new WebSocket(wsUrl);
          
          ws.onopen = () => {
            console.log('Connected to order counter');
            setCounterConnected(true);
            // Request current count
            ws.send(JSON.stringify({ type: 'get_count' }));
          };
          
          ws.onmessage = (event) => {
            try {
              const data = JSON.parse(event.data);
              if (data.type === 'count_update') {
                setCompletedOrdersCount(data.completedCount || 0);
                setQueuedOrdersCount(data.queuedCount || 0);
                console.log('Counters updated:', { 
                  completed: data.completedCount, 
                  queued: data.queuedCount 
                });
              }
            } catch (error) {
              console.error('Error parsing counter message:', error);
            }
          };
          
          ws.onclose = () => {
            console.log('Disconnected from order counter');
            setCounterConnected(false);
            // Try to reconnect after 3 seconds
            setTimeout(connectToCounter, 3000);
          };
          
          ws.onerror = (error) => {
            console.error('Counter WebSocket error:', error);
            setCounterConnected(false);
          };
          
          return ws;
        };
        
        const ws = connectToCounter();
        
        // Cleanup on unmount
        return () => {
          if (ws) {
            ws.close();
          }
        };
      }, []);

      const handlePlaceOrder = async () => {
        if (!customerName || !selectedFlavor) {
          setError('Please fill in your name and select a flavor!');
          return;
        }

        setLoading(true);
        setError(null);
        try {
          const response = await fetch('/order', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              customerName,
              flavor: selectedFlavor,
              size: selectedSize,
              decorations: selectedDecorations
            })
          });

          const data = await response.json();
          
          if (data.success) {
            // Refresh recent orders list
            fetchRecentOrders();
            // Clear form
            setCustomerName('');
            setSelectedFlavor('');
            setSelectedDecorations([]);
            setSelectedSize('8-inch');
          } else {
            setError('Failed to place order: ' + data.message);
          }
        } catch (error) {
          setError('Error placing order: ' + String(error));
        } finally {
          setLoading(false);
        }
      };

      const handleCheckStatus = async () => {
        if (!statusOrderId) {
          setError('Please enter an order ID!');
          return;
        }

        setLoading(true);
        setError(null);
        try {
          const response = await fetch(`/status/${statusOrderId}`);
          if (response.ok) {
            const data = await response.json();
            setOrderStatus(data);
          } else {
            const errorData = await response.json();
            setError('Error: ' + errorData.error);
          }
        } catch (error) {
          setError('Error checking status: ' + String(error));
        } finally {
          setLoading(false);
        }
      };

      const handleLoadStats = async () => {
        setLoading(true);
        setError(null);
        try {
          const response = await fetch('/orders/stats');
          const data = await response.json();
          setStats(data);
        } catch (error) {
          setError('Error loading stats: ' + String(error));
        } finally {
          setLoading(false);
        }
      };

      const handleResetCounter = async () => {
        setLoading(true);
        setError(null);
        try {
          const response = await fetch('/counter/reset', { method: 'POST' });
          const data = await response.json();
          if (data.success) {
            console.log('Counter reset successfully');
          }
        } catch (error) {
          setError('Error resetting counter: ' + String(error));
        } finally {
          setLoading(false);
        }
      };

      useEffect(() => {
        if (activeTab === 'stats') {
          handleLoadStats();
        }
      }, [activeTab]);

      return React.createElement('div', {
        className: 'min-h-screen bg-background p-4'
      }, [
        React.createElement('div', {
          key: 'container',
          className: 'mx-auto max-w-4xl space-y-6'
        }, [
          // Header
          React.createElement(Card, {
            key: 'header',
            className: 'bg-main text-main-foreground'
          }, [
            React.createElement(CardHeader, {
              key: 'header-content',
              className: 'text-center'
            }, [
              React.createElement(CardTitle, {
                key: 'title',
                className: 'text-4xl'
              }, 'üç∞ Neobrutalism Cake Shop'),
              React.createElement(CardDescription, {
                key: 'desc',
                className: 'text-main-foreground/80 text-lg'
              }, 'Demo powered by Cloudflare Workers + Hono + Queues')
            ])
          ]),

          // Real-time Counter Display
          React.createElement(Card, {
            key: 'counter-section',
            className: 'bg-secondary text-secondary-foreground border-2 border-foreground shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]'
          }, [
            React.createElement(CardContent, {
              key: 'counter-content',
              className: 'pt-6'
            }, [
              React.createElement('div', {
                key: 'counter-container',
                className: 'flex items-center justify-center gap-8'
              }, [
                React.createElement('div', {
                  key: 'queued-counter',
                  className: 'text-center'
                }, [
                  React.createElement('div', {
                    key: 'queued-icon',
                    className: 'text-2xl mb-1'
                  }, '‚è≥'),
                  React.createElement('div', {
                    key: 'queued-label',
                    className: 'text-xs font-medium text-secondary-foreground/80'
                  }, 'Orders Queued'),
                  React.createElement('div', {
                    key: 'queued-value',
                    className: 'text-3xl font-bold text-orange-600'
                  }, queuedOrdersCount.toLocaleString())
                ]),
                React.createElement('div', {
                  key: 'completed-counter',
                  className: 'text-center'
                }, [
                  React.createElement('div', {
                    key: 'completed-icon',
                    className: 'text-2xl mb-1'
                  }, 'üéâ'),
                  React.createElement('div', {
                    key: 'completed-label',
                    className: 'text-xs font-medium text-secondary-foreground/80'
                  }, 'Orders Completed'),
                  React.createElement('div', {
                    key: 'completed-value',
                    className: 'text-3xl font-bold text-green-600'
                  }, completedOrdersCount.toLocaleString())
                ]),
                React.createElement('div', {
                  key: 'connection-status',
                  className: 'flex flex-col items-center gap-2'
                }, [
                  React.createElement('div', {
                    key: 'status-dot',
                    className: `w-3 h-3 rounded-full ${counterConnected ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`
                  }),
                  React.createElement('span', {
                    key: 'status-text',
                    className: 'text-xs text-secondary-foreground/60'
                  }, counterConnected ? 'Live' : 'Reconnecting...')
                ])
              ])
            ])
          ]),

          // Error Display
          error && React.createElement(Card, {
            key: 'error',
            className: 'bg-destructive text-destructive-foreground'
          }, [
            React.createElement(CardContent, {
              key: 'error-content',
              className: 'pt-6'
            }, [
              React.createElement('div', {
                key: 'error-text',
                className: 'flex items-center gap-2'
              }, [
                React.createElement('span', { key: 'icon' }, '‚ö†Ô∏è'),
                React.createElement('span', { key: 'text' }, error),
                React.createElement(Button, {
                  key: 'close',
                  onClick: () => setError(null),
                  variant: 'ghost',
                  size: 'sm',
                  className: 'ml-auto text-destructive-foreground hover:bg-destructive-foreground/20'
                }, '‚úï')
              ])
            ])
          ]),

          // Navigation
          React.createElement('div', {
            key: 'nav',
            className: 'flex gap-2 justify-center'
          }, ['order', 'status', 'stats'].map(tab => 
            React.createElement(Button, {
              key: tab,
              variant: activeTab === tab ? 'default' : 'neutral',
              onClick: () => setActiveTab(tab),
              className: 'capitalize'
            }, `${tab === 'order' ? 'üìù' : tab === 'status' ? 'üìä' : 'üìà'} ${tab}`)
          )),

          // Order Tab
          activeTab === 'order' && React.createElement('div', {
            key: 'order-tab',
            className: 'grid gap-6 md:grid-cols-2'
          }, [
            React.createElement(Card, { key: 'order-form' }, [
              React.createElement(CardHeader, { key: 'form-header' }, [
                                  React.createElement(CardTitle, { key: 'form-title' }, 'Place Your Order üç∞'),
                React.createElement(CardDescription, { key: 'form-desc' }, 'Choose your favorite cake combination')
              ]),
              React.createElement(CardContent, {
                key: 'form-content',
                className: 'space-y-4'
              }, [
                // Customer Name
                React.createElement('div', {
                  key: 'name-section',
                  className: 'space-y-2'
                }, [
                  React.createElement(Label, { key: 'name-label' }, 'Your Name'),
                  React.createElement(Input, {
                    key: 'name-input',
                    placeholder: 'Enter your name',
                    value: customerName,
                    onChange: setCustomerName
                  })
                ]),

                // Flavors
                React.createElement('div', {
                  key: 'flavor-section',
                  className: 'space-y-2'
                }, [
                  React.createElement(Label, { key: 'flavor-label' }, 'Choose Flavor'),
                  React.createElement('div', {
                    key: 'flavor-grid',
                    className: 'grid grid-cols-2 gap-2'
                  }, FLAVORS.map(flavor =>
                    React.createElement(Button, {
                      key: flavor,
                      variant: selectedFlavor === flavor ? 'default' : 'neutral',
                      size: 'sm',
                      onClick: () => setSelectedFlavor(flavor),
                      className: 'text-xs justify-start'
                    }, flavor)
                  ))
                ]),

                // Size
                React.createElement('div', {
                  key: 'size-section',
                  className: 'space-y-2'
                }, [
                  React.createElement(Label, { key: 'size-label' }, 'Size'),
                  React.createElement('div', {
                    key: 'size-buttons',
                    className: 'flex gap-2'
                  }, ['small', 'medium', 'large'].map(size =>
                    React.createElement(Button, {
                      key: size,
                      variant: selectedSize === size ? 'default' : 'neutral',
                      size: 'sm',
                      onClick: () => setSelectedSize(size),
                      className: 'capitalize flex-1'
                    }, size)
                  ))
                ]),

                // Decorations
                React.createElement('div', {
                  key: 'decorations-section',
                  className: 'space-y-2'
                }, [
                  React.createElement(Label, { key: 'decorations-label' }, 'Decorations (Optional)'),
                  React.createElement('div', {
                    key: 'decorations-grid',
                    className: 'grid grid-cols-2 gap-2'
                  }, DECORATIONS.map(decoration =>
                    React.createElement(Button, {
                      key: decoration,
                      variant: selectedDecorations.includes(decoration) ? 'default' : 'neutral',
                      size: 'sm',
                      onClick: () => handleDecorationToggle(decoration),
                      className: 'text-xs justify-start'
                    }, `${selectedDecorations.includes(decoration) ? '‚úì ' : ''}${decoration}`)
                  ))
                ])
              ]),
              React.createElement(CardFooter, { key: 'form-footer' }, [
                React.createElement(Button, {
                  key: 'submit-button',
                  onClick: handlePlaceOrder,
                  disabled: loading || !customerName || !selectedFlavor,
                  className: 'w-full',
                  size: 'lg'
                }, loading ? 'Placing Order...' : 'üç¶ Place Order')
              ])
            ]),

            // Recent Orders List
            React.createElement(Card, { key: 'recent-orders' }, [
              React.createElement(CardHeader, { key: 'recent-header' }, [
                React.createElement(CardTitle, { key: 'recent-title' }, 'Recent Orders üìã'),
                React.createElement(CardDescription, { key: 'recent-desc' }, 'Last 5 orders placed')
              ]),
              React.createElement(CardContent, {
                key: 'recent-content',
                className: 'space-y-3'
              }, recentOrders.length > 0 ? recentOrders.map(order => 
                React.createElement('div', {
                  key: order.id,
                  className: 'border rounded-lg p-3 bg-muted/50'
                }, [
                  React.createElement('div', {
                    key: 'header',
                    className: 'flex justify-between items-start mb-2'
                  }, [
                    React.createElement('div', { key: 'customer' }, [
                      React.createElement('span', { className: 'font-medium' }, order.customerName),
                      React.createElement('span', { 
                        key: 'status',
                        className: `ml-2 px-2 py-1 rounded text-xs ${
                          order.status === 'completed' ? 'bg-green-100 text-green-800' :
                          order.status === 'preparing' ? 'bg-yellow-100 text-yellow-800' :
                          order.status === 'pending' ? 'bg-blue-100 text-blue-800' :
                          'bg-gray-100 text-gray-800'
                        }`
                      }, order.status)
                    ]),
                    React.createElement('span', {
                      key: 'price',
                      className: 'font-bold text-sm'
                    }, `$${order.totalPrice.toFixed(2)}`)
                  ]),
                  React.createElement('div', {
                    key: 'details',
                    className: 'text-sm text-muted-foreground'
                                      }, [
                      React.createElement('div', { key: 'item' }, `${order.size} ${order.flavor} cake`),
                      order.decorations && order.decorations.length > 0 && React.createElement('div', { 
                        key: 'decorations',
                        className: 'mt-1'
                      }, [
                        React.createElement('strong', null, 'Decorations: '),
                        order.decorations.join(', ')
                      ]),
                    React.createElement('div', {
                      key: 'time',
                      className: 'mt-1 text-xs'
                    }, [
                      React.createElement('span', null, 'Ordered: '),
                      new Date(order.createdAt).toLocaleString()
                    ])
                  ]),
                  React.createElement('div', {
                    key: 'actions',
                    className: 'mt-2 pt-2 border-t'
                  }, [
                    React.createElement(Button, {
                      key: 'check-status',
                      variant: 'outline',
                      size: 'sm',
                      onClick: () => {
                        setStatusOrderId(order.id);
                        setActiveTab('status');
                      },
                      className: 'text-xs'
                    }, 'Check Status')
                  ])
                ])
              ) : [
                React.createElement('div', {
                  key: 'empty',
                  className: 'text-center text-muted-foreground py-8'
                }, [
                  React.createElement('div', { key: 'icon', className: 'text-4xl mb-2' }, 'üç¶'),
                  React.createElement('div', { key: 'text' }, 'No orders yet. Place your first order above!')
                ])
              ])
            ])
          ]),

          // Status Tab
          activeTab === 'status' && React.createElement(Card, { key: 'status-tab' }, [
            React.createElement(CardHeader, { key: 'status-header' }, [
              React.createElement(CardTitle, { key: 'status-title' }, 'Check Order Status üìä'),
              React.createElement(CardDescription, { key: 'status-desc' }, 'Enter your order ID to see the current status')
            ]),
            React.createElement(CardContent, {
              key: 'status-content',
              className: 'space-y-4'
            }, [
              React.createElement('div', {
                key: 'status-input',
                className: 'flex gap-2'
              }, [
                React.createElement(Input, {
                  key: 'id-input',
                  placeholder: 'Enter your order ID',
                  value: statusOrderId,
                  onChange: setStatusOrderId,
                  className: 'flex-1'
                }),
                React.createElement(Button, {
                  key: 'check-button',
                  onClick: handleCheckStatus,
                  disabled: loading || !statusOrderId
                }, loading ? 'Checking...' : 'Check Status')
              ]),

              orderStatus && React.createElement(Card, {
                key: 'status-result',
                className: 'bg-secondary text-secondary-foreground'
              }, [
                React.createElement(CardContent, {
                  key: 'status-details',
                  className: 'pt-6'
                }, [
                  React.createElement('div', {
                    key: 'status-info',
                    className: 'space-y-2'
                  }, [
                                         React.createElement('div', { key: 'id' }, [
                       React.createElement('strong', null, 'Order ID: '),
                       orderStatus.orderId
                     ]),
                     React.createElement('div', { key: 'customer' }, [
                       React.createElement('strong', null, 'Customer: '),
                       orderStatus.customerName
                     ]),
                     React.createElement('div', { key: 'item' }, [
                       React.createElement('strong', null, 'Item: '),
                       orderStatus.item
                     ]),
                     orderStatus.decorations.length > 0 && React.createElement('div', { key: 'decorations' }, [
                       React.createElement('strong', null, 'Decorations: '),
                       orderStatus.decorations.join(', ')
                     ]),
                     React.createElement('div', { key: 'price' }, [
                       React.createElement('strong', null, 'Total Price: '),
                       `$${orderStatus.totalPrice.toFixed(2)}`
                     ]),
                     React.createElement('div', { key: 'status' }, [
                       React.createElement('strong', null, 'Status: '),
                       React.createElement('span', { className: 'capitalize font-bold' }, orderStatus.status)
                     ]),
                     React.createElement('div', { key: 'message' }, [
                       React.createElement('strong', null, 'Message: '),
                       orderStatus.message
                     ]),
                     orderStatus.estimatedTime && React.createElement('div', { key: 'wait' }, [
                       React.createElement('strong', null, 'Estimated Time: '),
                       orderStatus.estimatedTime
                     ]),
                     React.createElement('div', { key: 'created' }, [
                       React.createElement('strong', null, 'Ordered At: '),
                       new Date(orderStatus.createdAt).toLocaleString()
                     ])
                  ])
                ])
              ])
            ])
          ]),

          // Stats Tab
          activeTab === 'stats' && React.createElement('div', {
            key: 'stats-tab',
            className: 'space-y-6'
          }, [
            React.createElement(Card, { key: 'stats-header' }, [
              React.createElement(CardHeader, { key: 'stats-header-content' }, [
                React.createElement(CardTitle, { key: 'stats-title' }, 'üìà Shop Statistics'),
                React.createElement(CardDescription, { key: 'stats-desc' }, 'Real-time insights into our cake shop')
              ])
            ]),

            stats && React.createElement('div', {
              key: 'stats-content',
              className: 'grid gap-6 md:grid-cols-2'
            }, [
              React.createElement(Card, { key: 'flavors-card' }, [
                React.createElement(CardHeader, { key: 'flavors-header' }, [
                  React.createElement(CardTitle, { key: 'flavors-title' }, 'üèÜ Popular Flavors')
                ]),
                React.createElement(CardContent, { key: 'flavors-content' }, [
                  React.createElement('div', {
                    key: 'flavors-list',
                    className: 'space-y-2'
                  }, stats.stats.popularFlavors.map(flavor =>
                    React.createElement('div', {
                      key: flavor.flavor,
                      className: 'flex justify-between items-center'
                    }, [
                      React.createElement('span', { key: 'name' }, flavor.flavor),
                      React.createElement('div', {
                        key: 'progress',
                        className: 'flex items-center gap-2'
                      }, [
                        React.createElement('div', {
                          key: 'bar-bg',
                          className: 'w-20 h-2 bg-secondary rounded'
                        }, [
                          React.createElement('div', {
                            key: 'bar-fill',
                            className: 'h-full bg-main rounded',
                            style: { width: `${flavor.percentage}%` }
                          })
                        ]),
                        React.createElement('span', {
                          key: 'percentage',
                          className: 'text-sm font-bold'
                        }, `${flavor.percentage}%`)
                      ])
                    ])
                  ))
                ])
              ]),

              React.createElement(Card, { key: 'quick-stats' }, [
                React.createElement(CardHeader, { key: 'quick-header' }, [
                  React.createElement(CardTitle, { key: 'quick-title' }, 'üìä Quick Stats')
                ]),
                React.createElement(CardContent, {
                  key: 'quick-content',
                  className: 'space-y-4'
                }, [
                  React.createElement('div', {
                    key: 'daily',
                    className: 'flex justify-between'
                  }, [
                                         React.createElement('span', { key: 'total-label' }, 'Total Orders:'),
                     React.createElement('span', {
                       key: 'total-value',
                       className: 'font-bold'
                     }, stats.stats.totalOrders)
                   ]),
                                    React.createElement('div', {
                   key: 'daily',
                   className: 'flex justify-between'
                 }, [
                   React.createElement('span', { key: 'daily-label' }, 'Daily Orders:'),
                   React.createElement('span', {
                     key: 'daily-value',
                     className: 'font-bold'
                   }, stats.stats.dailyOrders)
                                  ]),
                 React.createElement('div', {
                   key: 'live-counters',
                   className: 'border-t pt-2 mt-2 space-y-1'
                 }, [
                   React.createElement('div', {
                     key: 'queued-live',
                     className: 'flex justify-between'
                   }, [
                     React.createElement('span', { key: 'queued-label' }, 'Live Queued Count:'),
                     React.createElement('span', {
                       key: 'queued-value',
                       className: 'font-bold text-orange-600'
                     }, `${queuedOrdersCount} ‚è≥`)
                   ]),
                   React.createElement('div', {
                     key: 'completed-live',
                     className: 'flex justify-between'
                   }, [
                     React.createElement('span', { key: 'completed-label' }, 'Live Completed Count:'),
                     React.createElement('span', {
                       key: 'completed-value',
                       className: 'font-bold text-green-600'
                     }, `${completedOrdersCount} üéâ`)
                   ]),
                   React.createElement('div', {
                     key: 'connection-indicator',
                     className: 'flex justify-between text-xs'
                   }, [
                     React.createElement('span', { key: 'status-label' }, 'Connection:'),
                     React.createElement('span', {
                       key: 'status-value',
                       className: `font-bold ${counterConnected ? 'text-green-600' : 'text-red-600'}`
                     }, counterConnected ? 'Live üü¢' : 'Reconnecting üî¥')
                   ])
                 ]),
                 React.createElement('div', {
                    key: 'processing',
                    className: 'flex justify-between'
                  }, [
                    React.createElement('span', { key: 'proc-label' }, 'Avg Processing:'),
                    React.createElement('span', {
                      key: 'proc-value',
                      className: 'font-bold'
                    }, stats.stats.averageProcessingTime)
                  ]),
                  React.createElement('div', {
                    key: 'size',
                    className: 'flex justify-between'
                  }, [
                    React.createElement('span', { key: 'size-label' }, 'Popular Size:'),
                    React.createElement('span', {
                      key: 'size-value',
                      className: 'font-bold capitalize'
                    }, stats.stats.popularSize)
                  ]),
                  React.createElement('div', { key: 'decorations-section' }, [
                    React.createElement('div', {
                      key: 'decorations-label',
                      className: 'font-bold mb-2'
                    }, 'Top Decorations:'),
                    React.createElement('div', {
                      key: 'decorations-list',
                      className: 'flex flex-wrap gap-1'
                    }, stats.stats.topDecorations.map(decoration =>
                      React.createElement('span', {
                        key: decoration,
                        className: 'px-2 py-1 bg-main text-main-foreground rounded text-xs'
                      }, decoration)
                    ))
                  ])
                ])
              ])
            ]),

            React.createElement(Button, {
              key: 'refresh-stats',
              onClick: handleLoadStats,
              disabled: loading,
              variant: 'neutral',
              className: 'w-full mb-2'
            }, loading ? 'Loading...' : 'üîÑ Refresh Stats'),

            React.createElement(Button, {
              key: 'reset-counter',
              onClick: handleResetCounter,
              disabled: loading,
              variant: 'outline',
              className: 'w-full text-sm'
            }, loading ? 'Resetting...' : 'üîÑ Reset Live Counter')
          ])
        ])
      ]);
    }

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(CakeShopApp));
  </script>
</body>
</html>
